@{
	Layout = null;
}


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link href="~/css/accountStyle.css" rel="stylesheet">



<div class="background"></div>
<article>
	<div class="main container">
		<div class="row verify-section">
			<div class="form-box col-md-12">
				<form id="forgetPassword">
					<h2>重設密碼</h2>
					<h5>請輸入帳號</h5>
					<p class="col-sm-8">請輸入你的帳號，我們會發送一封信件到註冊時的信箱，點擊信件中的連結以重設密碼。</p>
					<div>
						<div class="form-verify">
							<i class="bi bi-envelope"></i>
							<input type="text" id="memberAccount" name="memberAccount" class="user_input" autocomplete="off">
							@*@Html.TextBox("memberEmail", null, new { type = "email", @class = "user_input", required = "required" })*@
						</div>
					</div>
					<button class="resendBtn" type="submit">送出</button>
					<div class="backBtn">
						@*<a href="#">回上一頁</a>*@
						@Html.ActionLink("回上一頁", "Login" )

					</div>
				</form>
			</div>
		</div>
	</div>
</article>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script>
	document.getElementById("forgetPassword").addEventListener("submit", function (event) {
		event.preventDefault();

		let memberAccount = document.getElementById("memberAccount").value;

		if (memberAccount.trim() === "") {
			alert("請輸入帳號!");
			return false;
		}

		const formData =
		{
			memberAccount: memberAccount,
			memberPassword: ""
		}

		console.log(JSON.stringify(formData));

		$.ajax({
			type: "POST",
			url: "/api/Members/forgetPassword",
			data: JSON.stringify(formData),
			contentType: "application/json"
		}).done(data => {
			//alert(data);
			if (!data.success) {
				alert(data.message);
				return;
			}
			alert(data.message);

		}).fail((jqXHR, textStatus, errorThrown) => {
			if (jqXHR.status === 400) {
				const errorResponse = jqXHR.responseJSON;
				alert("fail" + errorResponse.message);
			} else {
				console.error("AJAX error:", textStatus, errorThrown);
			}
		});
		return false;
	});

</script>